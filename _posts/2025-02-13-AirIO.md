---
layout: post
title: "è®ºæ–‡å¤ç°ä¹‹â€”â€”ã€ŠAirIO: Learning Inertial Odometry with Enhanced IMU Feature Observabilityã€‹"
date:   2025-02-13
tags: [SLAM, Deep Learning]
comments: true
author: kwanwaipang
toc: true
---


<!-- * ç›®å½•
{:toc} -->


<!-- !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! -->
# å¼•è¨€

ä¹‹å‰åšå®¢[Paper Surveyä¹‹â€”â€”Deep IMU-Bias Inference](https://kwanwaipang.github.io/Deep-IMU-Bias/#airimu-learning-uncertainty-propagation-for-inertial-odometry)å¯¹åŸºäºlearningçš„IMU odometryè¿›è¡Œäº†è°ƒç ”åŠå­¦ä¹ ï¼Œå…¶ä¸­å¤ç°äº†[AirIMU: Learning uncertainty propagation for inertial odometry](https://kwanwaipang.github.io/Deep-IMU-Bias/#airimu-learning-uncertainty-propagation-for-inertial-odometry)å·¥ä½œå¯¹åº”IMUçš„è¡¥å¿ï¼Œå‘ç°æ•ˆæœéå¸¸æƒŠè‰³ï¼ˆè™½ç„¶æ³›åŒ–èƒ½åŠ›è¿˜æœ‰å¾…æå‡ï¼‰
æœ€è¿‘AirIMUä½œè€…æ–°å‡ºäº†å·¥ä½œã€ŠAirIO: Learning Inertial Odometry with Enhanced IMU Feature Observabilityã€‹å¹¶ä¸”å¼€æºäº†ï¼Œä¸ºæ­¤å†™ä¸‹æœ¬åšå®¢è®°å½•å­¦ä¹ ä¸å¤ç°è¿‡ç¨‹~

~~~
@article{qiu2025airio,
  title={AirIO: Learning Inertial Odometry with Enhanced IMU Feature Observability},
  author={Qiu, Yuheng and Xu, Can and Chen, Yutian and Zhao, Shibo and Geng, Junyi and Scherer, Sebastian},
  journal={arXiv preprint arXiv:2501.15659},
  year={2025}
}
~~~

<!-- !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! -->
# è®ºæ–‡å­¦ä¹ 
è¯¥å·¥ä½œæ˜¯å›´ç»•ç€åŸºäºæ— äººæœºçš„IOï¼ˆinertial odometryï¼‰ï¼Œä½œè€…å‘ç°å°†åŸå§‹IMUæ•°æ®è½¬æ¢ä¸ºå…¨å±€åæ ‡ä¼šç ´åæ— äººæœºå…³é”®è¿åŠ¨å­¦ä¿¡æ¯çš„å¯è§‚å¯Ÿæ€§ã€‚å› æ­¤ç›´å‡»åœ¨body frameä¸‹è¿›è¡ŒIMUæ•°æ®çš„ç‰¹å¾å­¦ä¹ ï¼ˆpreserving the IMU feature representation in the body frameï¼‰ã€‚
é€šè¿‡ç»“åˆä»–ä»¬çš„å‰ä½œ[AirIMU](https://kwanwaipang.github.io/Deep-IMU-Bias/#airimu-learning-uncertainty-propagation-for-inertial-odometry)ï¼ˆIMU correction modelï¼‰å’ŒEKFï¼Œæå‡ºAirIOæ¥å®ç°æ— äººæœºåœ¨å‰§çƒˆé£è¡ŒçŠ¶æ€ä¸‹çš„ä½å§¿ä¼°è®¡ï¼Œæ— éœ€é¢å¤–çš„sensoræˆ–è€…æ§åˆ¶è¾“å…¥ï¼ˆæ¯”å¦‚thrust commandsï¼‰.
EKFæ˜¯ç”¨äºæ•´åˆIMUé¢„ç§¯åˆ†ä»¥åŠæ‰€å­¦ä¹ çš„IMU correction modelçš„

ä»ä¸‹é¢æ•ˆæœæ¥çœ‹è¿˜æ˜¯æ¯”è¾ƒimpressiveçš„ï¼Œä»…ä»…ä¾é IMUå³å¯å®ç°ç¨³å®šçš„çŠ¶æ€ä¼°è®¡

<div align="center">
<video playsinline autoplay loop muted src="https://air-io.github.io/video/blackbird_for_web.mov" poster="https://kwanwaipang.github.io/File/Representative_works/loading-icon.gif" alt="sym" width="80%" style="padding-top:0px;padding-bottom:0px;border-radius:15px;"></video>

[IMO](https://github.com/uzh-rpg/learned_inertial_model_odometry):[ã€ŠLearned Inertial Odometry for Autonomous Drone Racingã€‹RAL2023](https://arxiv.org/pdf/2210.15287)

[RONIN](https://github.com/Sachini/ronin):[ã€ŠRonin: Robust neural inertial navigation in the wild: Benchmark, evaluations, & new methodsã€‹ICRA2020](https://arxiv.org/pdf/1905.12853)

</div>

è®ºæ–‡çš„è´¡çŒ®ç‚¹å¦‚ä¸‹ï¼š
1. å¯¹äºlearning-based IOè€Œè¨€ï¼Œbodyframe representation is more expressive and observable(ä¸€èˆ¬çš„åšæ³•åˆ™æ˜¯è½¬æ¢åˆ°global world frameæˆ–è€…ä»åŸå§‹çš„IMUæ•°æ®ä¸­å»æ‰é‡åŠ›)
2. AirIOæ˜¾å¼ç¼–ç å§¿æ€ï¼ˆposeï¼‰ä¿¡æ¯ï¼Œå¹¶ä¸”å°†å…¶ä¸body-frame IMU dataèåˆæ¥ä¼°ç®—body frameçš„é€Ÿåº¦ä»¥åŠå¯¹åº”çš„uncertaintyã€‚ï¼ˆè¿™éƒ¨åˆ†å°±æ˜¯æ‰€è°“çš„AirIO motion networkï¼‰
3. æ•´åˆuncertainty-aware IMU preintegration modeï¼ˆåº”è¯¥å°±æ˜¯å‰ä½œAirIMUï¼Œå¯ä»¥ä¼°ç®—IMUé¢„ç§¯åˆ†åŠå…¶uncertaintyï¼‰ä¸learned motion networkï¼ˆä¸Šé¢ç¬¬äºŒç‚¹ï¼‰åˆ°EKFä¸­æ¥å®ç°odometry estimation

è€Œæˆ‘ä¸ªäººè®¤ä¸ºæ›´é‡è¦çš„poitæ˜¯```Our model also demonstrates generalizability to the unseen datasets that are not included in the training sets.```å…·å¤‡è¾ƒå¥½çš„æ³›åŒ–èƒ½åŠ›æ˜¯å¾ˆé‡è¦çš„ï¼Œå½“ç„¶è¿™é‡Œæ‰€è°“çš„modelåº”è¯¥ä¸æ˜¯æŒ‡uncertainty-aware IMU preintegration modeæˆ–è€…learned motion networkï¼Œè€Œæ˜¯æŒ‡æ•´ä¸ªAirIOã€‚
<div align="center">
  <img src="../images/å¾®ä¿¡æˆªå›¾_20250213155232.png" width="60%" />
<figcaption>  
ä½†ä»å®éªŒç»“æœä¸­å¯ä»¥çœ‹åˆ°ï¼Œæ‰€è°“çš„generalizabilityåªæ˜¯åªæ²¡æœ‰ç”¨äºè®­ç»ƒçš„è€Œå·²hhh
</figcaption>
</div>
ä½†æ˜¯ä»å¼€æºçš„ä»£ç ä¸­å¯ä»¥å‘ç°ï¼Œå¯¹äºæµ‹è¯•çš„ä¸‰ä¸ªæ•°æ®é›†ï¼Œéƒ½éœ€è¦åˆ†åˆ«è®­ç»ƒAirIO network modelï¼ˆä¼°ç®—é€Ÿåº¦ç”¨çš„ï¼‰ä»¥åŠAirIMUï¼ˆå¯¹IMUè¿›è¡Œæ»¤æ³¢ï¼Œä¸”éœ€è¦ç”¨å…¶è¾“å‡ºä½œä¸ºEKFçš„è¾“å…¥ï¼Œå› æ­¤æ•´ä¸ªæ¨¡å‹çœ‹ä¼¼åº”è¯¥æ˜¯offlineçš„ï¼‰

<div align="center">
  <table style="border: none; background-color: transparent;">
    <tr>
      <td style="width: 50%; border: none; padding: 0.01; background-color: transparent; vertical-align: middle;">
        <img src="../images/å¾®ä¿¡æˆªå›¾_20250213150331.png" width="100%" />
      </td>
      <td style="width: 50%; border: none; padding: 0.01; background-color: transparent; vertical-align: middle;">
        <img src="../images/å¾®ä¿¡æˆªå›¾_20250213150508.png" width="100%" />
      </td>
    </tr>
  </table>
  <figcaption>
  å·¦å›¾ä¸ºmotion networkï¼›å³å›¾ä¸ºfull system
  </figcaption>
</div>


## IMU Coordinate Frame
å¯¹äºIMUå®é™…æµ‹é‡é‡ï¼ŒåŠ é€Ÿåº¦éƒ¨åˆ†åŒ…æ‹¬äº†ç‰©ä½“è‡ªèº«è¿åŠ¨å¸¦æ¥çš„ï¼ˆusually aligned with object body frameï¼‰ä»¥åŠåœ°çƒçš„é‡åŠ›ï¼Œå› æ­¤åœ¨timestamp iä¸‹æ‰€æµ‹é‡çš„åŠ é€Ÿåº¦åº”è¯¥ä¸ºï¼š
<div align="center">
  <table style="border: none; background-color: transparent;">
    <tr>
      <td style="width: 50%; border: none; padding: 0.01; background-color: transparent; vertical-align: middle;">
        <img src="../images/å¾®ä¿¡æˆªå›¾_20250213150951.png" width="100%" />
      </td>
      <td style="width: 50%; border: none; padding: 0.01; background-color: transparent; vertical-align: middle;">
        <img src="../images/å¾®ä¿¡æˆªå›¾_20250213151202.png" width="100%" />
      </td>
    </tr>
  </table>
  
  Body Coordinate Frame vs. Global Coordinate Frameï¼ˆ$\widehat{R}$<sub>i</sub>ä¸€èˆ¬åˆ™æ˜¯é€šè¿‡IMUé¢„ç§¯åˆ†æˆ–è€…EKFå¾—åˆ°ï¼Œç²¾åº¦ä¹Ÿä¸å¤Ÿï¼‰
</div>
æ¥ä¸‹æ¥ä½œè€…é€šè¿‡Principal Component Analysiså’Œt-SNEä¸€é¡¿åˆ†æï¼Œè¯æ˜äº†ä¸Šè¿°ä¸¤ä¸ªè¡¨è¾¾ä¸­ï¼Œåœ¨body frameä¸‹çš„è¡¨è¾¾æ›´å¥½ï¼ˆè¿‡ç¨‹å°±è·³è¿‡äº†ğŸ˜€ï¼‰

## AirIO Motion Network & Training
åœ¨encodersï¼Œç”¨CNNæ¥æå–body-frame IMU data (w<sup>B</sup>, a<sup>B</sup>)çš„ç‰¹å¾ä»¥åŠé£æœºçš„orientation $\xi \in so(3)$.
ç„¶åå°†feature concatenateåˆ°ä¸€èµ·ï¼Œå†ç”¨GRU layeræ¥æå–latent featureï¼›
è€Œåœ¨decoderï¼Œé‡‡ç”¨ä¸¤ä¸ªçº¿æ€§å±‚æ¥è¾“å‡ºbody-frame velocity and its uncertaintyã€‚æ•´ä¸ªç½‘ç»œçš„ç»“æ„å¯ä»¥è¡¨è¾¾å¦‚ä¸‹ï¼š
<div align="center">
  <img src="../images/å¾®ä¿¡æˆªå›¾_20250213153525.png" width="60%" />
<figcaption>  
åœ¨è®­ç»ƒä¸­é£æœºçš„orientationæœ‰GT poseæä¾›ï¼Œè€Œæµ‹è¯•çš„æ—¶å€™åˆ™æœ‰EKFä¼°ç®—çš„

ä½†ä»å¼€æºçš„ä»£ç ä¸­å¯ä»¥å‘ç°ï¼Œå¯¹äºæµ‹è¯•çš„ä¸‰ä¸ªæ•°æ®é›†ï¼Œéƒ½éœ€è¦åˆ†åˆ«è®­ç»ƒAirIO network modelï¼ˆä¼°ç®—é€Ÿåº¦ç”¨çš„ï¼‰ä»¥åŠAirIMUï¼ˆå¯¹IMUè¿›è¡Œæ»¤æ³¢ï¼Œä¸”éœ€è¦ç”¨å…¶è¾“å‡ºä½œä¸ºEKFçš„è¾“å…¥ï¼Œå› æ­¤æ•´ä¸ªæ¨¡å‹çœ‹ä¼¼åº”è¯¥æ˜¯offlineçš„ï¼‰
</figcaption>
</div>

PS:å°†é£æœºçš„orientationè½¬æ¢åˆ°so(3) Lie algebra spaceï¼ˆæ›´æœ‰åˆ©äºç½‘ç»œçš„smoother gradientï¼‰

## Extended Kalman Filter
ä¸Šè¿°çš„motion networkä»…ä»…æ˜¯ä¼°ç®—body frameçš„é€Ÿåº¦ï¼Œè€Œposeç­‰å…¶ä»–çŠ¶æ€åˆ™æœ‰EKFä¼°ç®—ã€‚
çŠ¶æ€ç©ºé—´$X$å®šä¹‰å¦‚ä¸‹
<div align="center">
  <img src="../images/å¾®ä¿¡æˆªå›¾_20250213154030.png" width="60%" />
<figcaption>  
</figcaption>
</div>
è€Œerror-state representation of the current filter stateä¸ºï¼š
<div align="center">
  <img src="../images/å¾®ä¿¡æˆªå›¾_20250213154112.png" width="60%" />
<figcaption>  
</figcaption>
</div>

é‡‡ç”¨AirIMUæ¥æ»¤æ‰IMUçš„å™ªå£°ä»¥åŠä¼°ç®—IMU sensor modelçš„uncertainty
<div align="center">
  <img src="../images/å¾®ä¿¡æˆªå›¾_20250213154310.png" width="60%" />
<figcaption>  
</figcaption>
</div>

è€ŒEKFçš„ä¼ æ’­æ¨¡å‹åˆ™å¦‚ä¸‹ï¼š
<div align="center">
  <img src="../images/å¾®ä¿¡æˆªå›¾_20250213154531.png" width="60%" />
<figcaption>  
</figcaption>
</div>

æ›´æ–°æ¨¡å‹åˆ™æ˜¯ç”± AirIO Motion Networkä¼°ç®—çš„é€Ÿåº¦å¸¦æ¥çš„ï¼Œå¦‚ä¸‹ï¼š
<div align="center">
  <img src="../images/å¾®ä¿¡æˆªå›¾_20250213154621.png" width="60%" />
<figcaption>  
</figcaption>
</div>



<!-- !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! -->
# ä»£ç å¤ç°
* [My AirIO_Comment](https://github.com/KwanWaiPang/AirIO_Comment)
* å¤ç°è¿‡ç¨‹é‡‡ç”¨Eurocæ•°æ®ï¼Œä½œè€…åœ¨åŸæ–‡ä¹Ÿæåˆ°ç”¨å…¶ä¸­çš„5ä¸ªåºåˆ—æ¥è¿›è¡Œè®­ç»ƒï¼Œè€Œæµ‹è¯•è¿‡ç¨‹é‡‡ç”¨çš„åºåˆ—ä¸º`MH_02_easy`,`MH_04_difficult`,`V1_03_difficult`,`V2_02_medium`,å’Œ`V1_01_easy`
<div align="center">
  <img src="../images/å¾®ä¿¡æˆªå›¾_20250213181259.png" width="60%" />
<figcaption>  
</figcaption>
</div>

[comment]: <> 

<!-- PROJECT LOGO -->

<p align="center">

  <h1 align="center"> AirIO: Learning Inertial Odometry with Enhanced IMU Feature Observability
  </h1>

[comment]: <> (  <h2 align="center">PAPER</h2>)
  <h3 align="center">
  <a href="https://kwanwaipang.github.io/AirIO/">Blog</a> 
  | <a href="https://github.com/Air-IO/Air-IO">Original Github Page</a>
  | <a href="https://github.com/KwanWaiPang/AirIMU_comment">AirIMU_comment</a>
  </h3>
  <div align="justify">
  </div>

<br>

<!-- ~~~
rm -rf .git
git init
git add .
git commit -m "first commit"
git branch -M main
git remote add origin https://github.com/KwanWaiPang/AirIO_Comment.git
git push -u origin main
~~~ -->

## é…ç½®å®‰è£…
```bash
conda create -n airio python=3.10.11
# conda remove --name airio --all
conda activate airio

#åŒæ ·ä¾èµ–äºpypose
# å®‰è£…ç³»åˆ—ä¾èµ–
pip install matplotlib==3.8.4
pip install numpy==2.2.2
pip install pyhocon==0.3.61
pip install pypose==0.6.8
pip install pyproj==3.7.0
pip install PyYAML==6.0.2
pip install scipy==1.15.1
pip install simplekml==1.3.6
# pip install torch==2.5.1 #é‡å¤å®‰è£…äº†~
pip install tqdm==4.66.5
pip install wandb==0.19.4

```

## ä¸‹è½½æ•°æ®é›†
* [Euroc](https://projects.asl.ethz.ch/datasets/doku.php?id=kmavvisualinertialdatasets),è·¯å¾„åœ¨```/home/gwp/AirIMU/Euroc_dataset```
* [Blackbird dataset](http://blackbird-dataset.mit.edu/BlackbirdDatasetData/),è·¯å¾„åœ¨```/home/gwp/Air-IO/Blackbird_dataset```

## è·å–é¢„è®­ç»ƒæ¨¡å‹
* ä½œè€…æåˆ°è¦è¿è¡ŒEKFæ¨¡å¼ï¼Œæ˜¯éœ€è¦ä¸‹è½½ AirIMU resultsçš„ï¼Œå®ƒæä¾›äº†IMUé¢„ç§¯åˆ†ä»¥åŠuncertaintyï¼ˆè¿™æ ·æ¥è¯´ç›¸å½“äºå¾—å…ˆç”¨AirIMUæ¥å¤„ç†æ•°æ®ï¼Œå› æ­¤åº”è¯¥å±äºæ˜¯offlineçš„~ï¼‰
* è€Œå¦‚æœè¦ç”¨å…¶ä»–æ•°æ®é›†ï¼Œå¯èƒ½å°±æ˜¯è¦é‡æ–°è®­ç»ƒAirIMUäº†~

| Datasets               | AirIO Pre-trained Models & Results| AirIMU Pre-trained Models & Results | 
| :----------------: | :------: | :----: |
| EuRoC       |  [AirIO Model](https://github.com/Air-IO/Air-IO/releases/download/AirIO/AirIO_EuRoC.zip)   | [AirIMU](https://github.com/Air-IO/Air-IO/releases/download/AirIMU/AirIMU_EuRoC.zip)|
| Blackbird           |   [AirIO Model](https://github.com/Air-IO/Air-IO/releases/download/AirIO/AirIO_Blackbird.zip)  | [AirIMU](https://github.com/Air-IO/Air-IO/releases/download/AirIMU/AirIMU_blackbird.zip)|
| Pegasus    |  [AirIO Model](https://github.com/Air-IO/Air-IO/releases/download/AirIO/AirIO_Pegasus.zip)   | [AirIMU](https://github.com/Air-IO/Air-IO/releases/download/AirIMU/AirIMU_pegasus.zip)|

> [!NOTE]
> Each AirIMU Results pickle file contains raw IMU correction; 
> Each Orientations pickle file contains two critical keys: airimu_rot for AirIMU-corrected orientation, inte_rot for raw IMU integrated orientation.

## æµ‹è¯•Euroc
* ç½‘ç»œè¾“å‡ºä¼šä¿å­˜ä¸º`net_output.pickle` æ–‡ä»¶ï¼ˆè·¯å¾„åœ¨`AirIO_EuRoC/AirIO_checkpoint/net_output.pickle`ï¼‰
* è®°å¾—ä¿®æ”¹`configs/datasets/EuRoC/Euroc_body.conf`ä¸­å…³äºæ•°æ®çš„è·¯å¾„~
* `configs/EuRoC/motion_body_rot.conf`ä¸­çš„['general']['exp_dir']ä¹Ÿè¦ä¿®æ”¹ï¼ˆè¿™æ˜¯æ¨¡å‹çš„è·¯å¾„ï¼‰
* AirIO network supports three orientation input modes:
    * Default: using Ground-truth orientation (no setup required)
    * Switch modes: modify the rot_type and rot_path in the dataset config file configs/datasets/EuRoC/Euroc_body.conf. You can use AirIMU-corrected Orientation (rot_type: airimu) or raw IMU preintegration orientation (rot_type: integration). è¿™éƒ¨åˆ†çš„æ“ä½œåˆ™æ˜¯éœ€è¦AirIMUçš„è¾“å‡ºç»“æœ
    * Download precomputed rotation files (e.g. orientation_output.pickle) from the Download Datasets section and update the rot_path.
~~~
python inference_motion.py --config configs/EuRoC/motion_body_rot.conf
~~~

### Evaluate & Visualize Network Predictions
* é€šè¿‡ä¸‹é¢å‘½ä»¤æ¥éªŒè¯ç½‘ç»œå¯¹äºmotionçš„ä¼°ç®—æ•ˆæœå¹¶ä¸”ç”»å‡ºè½¨è¿¹

```bash
# æ³¨æ„ï¼šåˆ é™¤åæ–œæ åçš„ç©ºæ ¼ï¼Œç¡®ä¿æ¯è¡Œä»¥ \ ç»“å°¾ä¸”æ²¡æœ‰å…¶ä»–å­—ç¬¦ï¼š
python evaluation/evaluate_motion.py \
    --dataconf configs/datasets/EuRoC/Euroc_body.conf \
    --exp AirIO_EuRoC/AirIO_checkpoint \
    --savedir ./result/loss_result \
    --seqlen 1000

# --seq is the segment length (in frames) for RTE calculation
# --exp is the Path for AirIO netoutput

# ä¸‹é¢ä¸¤ç§éƒ½ä¼šå‡ºç°æŠ¥é”™çš„æƒ…å†µï¼Œè¿˜æœªfix
# `AirIO_EuRoC/network_output_using_airimuRot/net_output.pickle`ä¸­æœ‰ç”¨airimuä½œä¸ºrotationçš„ç½‘ç»œè¾“å‡º
python evaluation/evaluate_motion.py \
    --dataconf configs/datasets/EuRoC/Euroc_body.conf \
    --exp AirIO_EuRoC/network_output_using_airimuRot \
    --savedir ./result/loss_result_airimuRot \
    --seqlen 1000

# `AirIO_EuRoC/network_output_using_gtRot/net_output.pickle`ä¸­æœ‰ç”¨GTä½œä¸ºrotationçš„ç½‘ç»œè¾“å‡º
python evaluation/evaluate_motion.py \
    --dataconf configs/datasets/EuRoC/Euroc_body.conf \
    --exp AirIO_EuRoC/network_output_using_gtRot \
    --savedir ./result/loss_result_gtRot \
    --seqlen 1000
```

è¾“å‡ºçš„ç»“æœå¦‚ä¸‹ï¼š

```json
[
    {
        "name": "MH_02_easy",
        "ATE": 2.530659436584817,
        "AVE": 0.18877704889692698,
        "RP_RMSE": 0.972156050539075,
        "Integration Method": "==============Integration==============",
        "Integration pos_err": 35431.88813105013,
        "Integration vel_err": 9.474668063515825,
        "AirIO Method": "==============AirIO==============",
        "AirIO pos_err": 2.2516072971978067,
        "AirIO vel_err": 0.807469868411387
    },
    {
        "name": "MH_04_difficult",
        "ATE": 2.2503146961385756,
        "AVE": 0.22445296159494285,
        "RP_RMSE": 1.0092401639709976,
        "Integration Method": "==============Integration==============",
        "Integration pos_err": 17034.383004241186,
        "Integration vel_err": 9.248072741739545,
        "AirIO Method": "==============AirIO==============",
        "AirIO pos_err": 2.111607675401745,
        "AirIO vel_err": 0.8878740819530951
    },
    {
        "name": "V1_03_difficult",
        "ATE": 3.1073632144485637,
        "AVE": 0.38263154057907856,
        "RP_RMSE": 1.511648049992939,
        "Integration Method": "==============Integration==============",
        "Integration pos_err": 16898.100169538437,
        "Integration vel_err": 8.73100262917092,
        "AirIO Method": "==============AirIO==============",
        "AirIO pos_err": 2.672330765766064,
        "AirIO vel_err": 1.3228342084701386
    },
    {
        "name": "V2_02_medium",
        "ATE": 4.309661365752476,
        "AVE": 0.33851355967935326,
        "RP_RMSE": 1.263009365746855,
        "Integration Method": "==============Integration==============",
        "Integration pos_err": 11761.063571576806,
        "Integration vel_err": 8.452118708802605,
        "AirIO Method": "==============AirIO==============",
        "AirIO pos_err": 3.5996171944071746,
        "AirIO vel_err": 1.1390835097147682
    },
    {
        "name": "V1_01_easy",
        "ATE": 6.52871041920713,
        "AVE": 0.2774450150679226,
        "RP_RMSE": 1.2017184870731785,
        "Integration Method": "==============Integration==============",
        "Integration pos_err": 24396.605673957074,
        "Integration vel_err": 10.97922060906811,
        "AirIO Method": "==============AirIO==============",
        "AirIO pos_err": 5.919706406806912,
        "AirIO vel_err": 1.0943105537291968
    }
]
```

<div align="center">
  <table style="border: none; background-color: transparent;">
    <tr align="center">
      <td style="width: 50%; border: none; padding: 0.01; background-color: transparent; vertical-align: middle;">
        <img src="https://github.com/KwanWaiPang/AirIO_Comment/raw/main/result/loss_result/MH_02_easy_state.png" width="100%" />
        MH_02_easy_state
      </td>
      <td style="width: 50%; border: none; padding: 0.01; background-color: transparent; vertical-align: middle;">
        <img src="https://github.com/KwanWaiPang/AirIO_Comment/raw/main/result/loss_result/MH_04_difficult_state.png" width="100%" />
        MH_04_difficult_state
      </td>
    </tr>
    <tr align="center">
      <td style="width: 50%; border: none; padding: 0.01; background-color: transparent; vertical-align: middle;">
        <img src="https://github.com/KwanWaiPang/AirIO_Comment/raw/main/result/loss_result/V1_01_easy_state.png" width="100%" />
        V1_01_easy_state
      </td>
      <td style="width: 50%; border: none; padding: 0.01; background-color: transparent; vertical-align: middle;">
        <img src="https://github.com/KwanWaiPang/AirIO_Comment/raw/main/result/loss_result/V1_03_difficult_state.png" width="100%" />
        V1_03_difficult_state
      </td>
    </tr>
  </table>

  <img src="https://github.com/KwanWaiPang/AirIO_Comment/raw/main/result/loss_result/V2_02_medium_state.png" width="60%" />
  
  <figcaption>
   V2_02_medium_state
  </figcaption>
</div>

* è™½ç„¶çœ‹ä¼¼æœ‰ä¸å°‘çš„driftï¼Œä½†æ˜¯è·ŸIMUé¢„ç§¯åˆ†æ¯”èµ·æ¥å°‘å¾ˆå¤šï¼Œä¸”æ­¤å¤„ä»…ä»…æ˜¯ç”¨äº†AirIOçš„motion networkè€Œå·²ï¼ˆåº”è¯¥æ˜¯ç”¨é€Ÿåº¦ç§¯åˆ†è®¡ç®—è½¨è¿¹çš„ï¼‰
* ä¸Šå›¾åº”è¯¥ä¸»è¦å¯¹æ¯”çš„æ˜¯ä¼°ç®—çš„é€Ÿåº¦çš„æƒ…å†µ

### è¿è¡ŒEKF
* EKFçš„ç»“æœä¼šä¿å­˜ä¸º`${SEQUENCE_NAME}_ekf_poses.npy` and `${SEQUENCE_NAME}_ekf_results.npy`
```bash
python EKF/IMUofflinerunner.py \
      --dataconf configs/datasets/EuRoC/Euroc_body.conf \
      --exp AirIO_EuRoC/network_output_using_gtRot \
      --airimu_exp AirIMU_EuRoC \
      --savedir ./EKFresult/loss_result

# --airimu_exp ${AirIMU_RESULT_PATH}      
```
* å¯è§†åŒ–ç»“æœå¦‚ä¸‹
    1. EKFä¼°ç®—çš„è½¨è¿¹ vs çœŸå€¼è½¨è¿¹
    2. EKFçš„bias
    3. ä¼°ç®—è§’åº¦ vs çœŸå€¼ 
    4. ä¼°ç®—ä½ç½®ï¼ˆè“è‰²ï¼‰ vs é€Ÿåº¦ç§¯åˆ†ä¼°ç®—çš„ä½ç½®ï¼ˆçº¢è‰²ï¼‰ vs çœŸå€¼ï¼ˆç»¿è‰²ï¼‰
<div align="center">
  <table style="border: none; background-color: transparent;">
    <tr align="center">
      <td style="width: 50%; border: none; padding: 0.01; background-color: transparent; vertical-align: middle;">
        <img src="https://github.com/KwanWaiPang/AirIO_Comment/raw/main/EKFresult/loss_result/MH_02_easy_ekf_result.png" width="100%" />
        ekf_result
      </td>
      <td style="width: 50%; border: none; padding: 0.01; background-color: transparent; vertical-align: middle;">
        <img src="https://github.com/KwanWaiPang/AirIO_Comment/raw/main/EKFresult/loss_result/MH_02_easy_bias.png" width="100%" />
        bias
      </td>
    </tr>
    <tr align="center">
      <td style="width: 50%; border: none; padding: 0.01; background-color: transparent; vertical-align: middle;">
        <img src="https://github.com/KwanWaiPang/AirIO_Comment/raw/main/EKFresult/loss_result/EKF_rot_MH_02_easy_orientation_compare.png" width="100%" />
        EKF_rot_orientation_compare
      </td>
      <td style="width: 50%; border: none; padding: 0.01; background-color: transparent; vertical-align: middle;">
        <img src="https://github.com/KwanWaiPang/AirIO_Comment/raw/main/EKFresult/loss_result/EKF_vel_MH_02_easy.png" width="100%" />
        EKF_vel
      </td>
    </tr>
  </table>
  <figcaption>
   MH_02_easy
  </figcaption>
</div>

<div align="center">
  <table style="border: none; background-color: transparent;">
    <tr align="center">
      <td style="width: 50%; border: none; padding: 0.01; background-color: transparent; vertical-align: middle;">
        <img src="https://github.com/KwanWaiPang/AirIO_Comment/raw/main/EKFresult/loss_result/MH_04_difficult_ekf_result.png" width="100%" />
        ekf_result
      </td>
      <td style="width: 50%; border: none; padding: 0.01; background-color: transparent; vertical-align: middle;">
        <img src="https://github.com/KwanWaiPang/AirIO_Comment/raw/main/EKFresult/loss_result/MH_04_difficult_bias.png" width="100%" />
        bias
      </td>
    </tr>
    <tr align="center">
      <td style="width: 50%; border: none; padding: 0.01; background-color: transparent; vertical-align: middle;">
        <img src="https://github.com/KwanWaiPang/AirIO_Comment/raw/main/EKFresult/loss_result/EKF_rot_MH_04_difficult_orientation_compare.png" width="100%" />
        EKF_rot_orientation_compare
      </td>
      <td style="width: 50%; border: none; padding: 0.01; background-color: transparent; vertical-align: middle;">
        <img src="https://github.com/KwanWaiPang/AirIO_Comment/raw/main/EKFresult/loss_result/EKF_vel_MH_04_difficult.png" width="100%" />
        EKF_vel
      </td>
    </tr>
  </table>
  <figcaption>
   MH_04_difficult
  </figcaption>
</div>

<div align="center">
  <table style="border: none; background-color: transparent;">
    <tr align="center">
      <td style="width: 50%; border: none; padding: 0.01; background-color: transparent; vertical-align: middle;">
        <img src="https://github.com/KwanWaiPang/AirIO_Comment/raw/main/EKFresult/loss_result/V1_03_difficult_ekf_result.png" width="100%" />
        ekf_result
      </td>
      <td style="width: 50%; border: none; padding: 0.01; background-color: transparent; vertical-align: middle;">
        <img src="https://github.com/KwanWaiPang/AirIO_Comment/raw/main/EKFresult/loss_result/V1_03_difficult_bias.png" width="100%" />
        bias
      </td>
    </tr>
    <tr align="center">
      <td style="width: 50%; border: none; padding: 0.01; background-color: transparent; vertical-align: middle;">
        <img src="https://github.com/KwanWaiPang/AirIO_Comment/raw/main/EKFresult/loss_result/EKF_rot_V1_03_difficult_orientation_compare.png" width="100%" />
        EKF_rot_orientation_compare
      </td>
      <td style="width: 50%; border: none; padding: 0.01; background-color: transparent; vertical-align: middle;">
        <img src="https://github.com/KwanWaiPang/AirIO_Comment/raw/main/EKFresult/loss_result/EKF_vel_V1_03_difficult.png" width="100%" />
        EKF_vel
      </td>
    </tr>
  </table>
  <figcaption>
   V1_03_difficult
  </figcaption>
</div>

<div align="center">
  <table style="border: none; background-color: transparent;">
    <tr align="center">
      <td style="width: 50%; border: none; padding: 0.01; background-color: transparent; vertical-align: middle;">
        <img src="https://github.com/KwanWaiPang/AirIO_Comment/raw/main/EKFresult/loss_result/V2_02_medium_ekf_result.png" width="100%" />
        ekf_result
      </td>
      <td style="width: 50%; border: none; padding: 0.01; background-color: transparent; vertical-align: middle;">
        <img src="https://github.com/KwanWaiPang/AirIO_Comment/raw/main/EKFresult/loss_result/V2_02_medium_bias.png" width="100%" />
        bias
      </td>
    </tr>
    <tr align="center">
      <td style="width: 50%; border: none; padding: 0.01; background-color: transparent; vertical-align: middle;">
        <img src="https://github.com/KwanWaiPang/AirIO_Comment/raw/main/EKFresult/loss_result/EKF_rot_V2_02_medium_orientation_compare.png" width="100%" />
        EKF_rot_orientation_compare
      </td>
      <td style="width: 50%; border: none; padding: 0.01; background-color: transparent; vertical-align: middle;">
        <img src="https://github.com/KwanWaiPang/AirIO_Comment/raw/main/EKFresult/loss_result/EKF_vel_V2_02_medium.png" width="100%" />
        EKF_vel
      </td>
    </tr>
  </table>
  <figcaption>
   V2_02_medium
  </figcaption>
</div>

* æœ€åçš„V1_01_easyæŠ¥é”™å¦‚ä¸‹
~~~
odict_keys(['mode', 'coordinate', 'rot_type', 'rot_path', 'data_list', 'gravity'])
ConfigTree([('name', 'Euroc'), ('window_size', 1000), ('step_size', 1000), ('data_root', '/home/gwp/AirIMU/Euroc_dataset'), ('data_drive', ['V1_01_easy'])])
/home/gwp/AirIMU/Euroc_dataset V1_01_easy
loaded: /home/gwp/AirIMU/Euroc_dataset, interpolate: True, gravity: 9.81007
Traceback (most recent call last):
  File "/home/gwp/Air-IO/EKF/IMUofflinerunner.py", line 174, in <module>
    dataset_inf = SeqInfDataset(data_conf.data_root, data_name, inference_state, device = args.device, name = data_conf.name,duration=1, step_size=1, drop_last=False, conf = dataset_conf)
  File "/home/gwp/Air-IO/datasets/dataset.py", line 130, in __init__
    self.data["acc"][:-1] += inference_state["correction_acc"][:, time_cut:].cpu()[0]
RuntimeError: The size of tensor a (28711) must match the size of tensor b (28940) at non-singleton dimension 0
~~~

### Evaluate & Visualize EKF Results
```bash
python evaluation/evaluate_ekf.py \
    --dataconf configs/datasets/EuRoC/Euroc_body.conf \
    --exp EKFresult/loss_result \
    --savedir ./result/loss_result_ekf \
    --seqlen 1000
```

```json
[
    {
        "name": "MH_02_easy",
        "ATE(EKF)": 2.4776350567640453,
        "RTE(EKF)": 0.8392048606301833,
        "RP_RMSE(EKF)": 0.986514639276038
    },
    {
        "name": "MH_04_difficult",
        "ATE(EKF)": 2.3080264050205286,
        "RTE(EKF)": 0.8697517581648648,
        "RP_RMSE(EKF)": 1.0046212473704987
    },
    {
        "name": "V1_03_difficult",
        "ATE(EKF)": 3.050263789492288,
        "RTE(EKF)": 1.3646776743637254,
        "RP_RMSE(EKF)": 1.5521645175050485
    },
    {
        "name": "V2_02_medium",
        "ATE(EKF)": 4.20582509824693,
        "RTE(EKF)": 1.1778671729026637,
        "RP_RMSE(EKF)": 1.3132037593617787
    }
]
```






# å‚è€ƒèµ„æ–™
* [AirIO: Learning Inertial Odometry with Enhanced IMU Feature Observability](https://arxiv.org/pdf/2501.15659)
* [AirIOä¸»é¡µ](https://air-io.github.io/)
* [AirIOä»£ç ](https://github.com/Air-IO/Air-IO)
* [AirIOä½œè€…githubçš„ä»£ç ](https://github.com/haleqiu/Air-IO)
* [Paper Surveyä¹‹â€”â€”Deep IMU-Bias Inference](https://kwanwaipang.github.io/Deep-IMU-Bias/#airimu-learning-uncertainty-propagation-for-inertial-odometry)
* [Paper Survey: Learning-based VO and VIO](https://kwanwaipang.github.io/File/Blogs/Poster/Learning_based_VO.html)