---
layout: post
title: "è®ºæ–‡å­¦ä¹ åŠå®éªŒç¬”è®°ä¹‹â€”â€”ã€ŠVGGT: Visual Geometry Grounded Transformerã€‹"
date:   2025-03-18
tags: [Deep Learning]
comments: true
author: kwanwaipang
toc: true
---


<!-- * ç›®å½•
{:toc} -->


<!-- !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! -->
# å¼•è¨€
ä¹‹å‰åšå®¢å¯¹Transformerä»¥åŠåŸºäºTransformerçš„SLAMè¿›è¡Œäº†è§£è¯»ã€‚è€Œæœ€è¿‘Oxfordä»¥åŠMeta AIåœ¨CVPR2025æ–°å¼€æºäº†VGGTå¯ä»¥å®ç°æ¨ç†åœºæ™¯ä¸­çš„æ‰€æœ‰çš„å…³é”®ä¸‰ç»´å±æ€§ï¼ˆå¦‚ï¼šç›¸æœºçš„å†…å‚ä¸å¤–å‚ï¼Œpoint mapï¼Œæ·±åº¦å›¾ï¼Œ3Dç‚¹è·Ÿè¸ªï¼‰ã€‚

ä¸ºæ­¤ï¼Œå†™ä¸‹æœ¬åšæ–‡è®°å½•é˜…è¯»åŠæµ‹è¯•è¿‡ç¨‹ï¼Œæœ¬åšæ–‡ä»…ä¾›æœ¬äººå­¦ä¹ è®°å½•ç”¨~

ç›¸å…³çš„èµ„æ–™ï¼š
* [paper](https://arxiv.org/pdf/2503.11651)
* [Github](https://github.com/facebookresearch/vggt)
* [Awesome Transformer-based SLAM](https://github.com/KwanWaiPang/Awesome-Transformer-based-SLAM)
* [Paper Surveyä¹‹â€”â€”Awesome Transformer-based SLAM](https://kwanwaipang.github.io/Transformer_SLAM/)
* [What is Transformer? Form NLP to CV](https://kwanwaipang.github.io/Transformer/)


# ç†è®ºè§£è¯»

VGGTæ˜¯ä¸€ä¸ª large feed-forward transformerï¼Œé€šè¿‡è¾“å…¥é«˜è¾¾æ•°ç™¾å¼ å›¾ç‰‡ï¼Œä¸€æ¬¡ï¼ˆå°‘äº1ç§’ï¼‰é¢„æµ‹å‡ºæ‰€æœ‰å›¾ç‰‡çš„ä¸‰ç»´å±æ€§ï¼ˆç›¸æœºçš„å†…å‚ä¸å¤–å‚ï¼Œpoint mapï¼Œæ·±åº¦å›¾ï¼Œ3Dç‚¹è·Ÿè¸ªï¼‰ï¼Œå¹¶ä¸”åœ¨è¿™äº›3D taskçš„ä»»åŠ¡ä¸­éƒ½å–å¾—éå¸¸ä¼˜å¼‚çš„æ€§èƒ½ï¼Œå¹¶ä¸”è¿›ä¸€æ­¥çš„æŠŠè¿™ä¸ªé¢„è®­ç»ƒçš„VGGTç”¨åˆ°ä¸‹æ¸¸ä»»åŠ¡ï¼ˆå¦‚éåˆšä½“ç‚¹è·Ÿè¸ªï¼Œæ–°è§†è§’åˆæˆï¼‰çš„feature backboneä¸­ä¹Ÿå¯ä»¥è·å¾—æ›´å¥½çš„æ€§èƒ½~

<div align="center">
  <img src="../images/å¾®ä¿¡æˆªå›¾_20250318160516.png" width="80%" />
<figcaption>  
</figcaption>
</div>

è·ŸDUSt3Rå’ŒMASt3Rä¸€æ ·ï¼ŒVGGTåˆ™æ˜¯é’ˆå¯¹å‡ ä¹å®Œå…¨é¿å…å‡ ä½•åå¤„ç†æ¥ç›´æ¥è§£å†³3D tasksï¼Œä½†ä¸ä¸€æ ·çš„æ˜¯å‰ä¸¤ç€æœ¬è´¨ä¸Šè¿˜æ˜¯å¤„ç†æˆå¯¹å›¾ç‰‡ï¼Œè€ŒVGGTåˆ™æ˜¯ä¸€æ¬¡è¾“å…¥ï¼Œä¸éœ€è¦ä»»ä½•é¢å¤–çš„åç«¯ä¼˜åŒ–ã€‚

VGGTçš„ç»“æ„å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚

<div align="center">
  <img src="../images/å¾®ä¿¡æˆªå›¾_20250318160240.png" width="80%" />
<figcaption>  
</figcaption>
</div>
æ³¨æ„ï¼ŒVGGTè·ŸDUSt3Rä¸ä¸€æ ·ï¼Œå„ä¸ªè¾“å‡ºå¹¶ä¸æ˜¯ç‹¬ç«‹çš„ï¼ˆDUSt3Rçš„éƒ¨åˆ†ç»“æœæ˜¯é¢å¤–æ¨ç†å¾—åˆ°çš„ï¼Œæ¯”å¦‚poseå¯ä»¥é€šè¿‡pnpæ¥è®¡ç®—å‡ºæ¥ï¼‰ã€‚å› æ­¤ï¼ŒVGGTè®­ç»ƒçš„æ—¶å€™æ˜¯ä¸€ä¸ªé’ˆå¯¹å››ä¸ªtaskçš„ç»Ÿä¸€çš„lossï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º

<div align="center">
  <img src="../images/å¾®ä¿¡æˆªå›¾_20250318161000.png" width="60%" />
<figcaption>  
å‰é¢ä¸‰ä¸ªlossçš„å°ºåº¦æ˜¯è¿‘ä¼¼çš„ï¼Œè€Œtracking losséœ€è¦å°ºåº¦Î»=0.05
</figcaption>
</div>

å…·ä½“å„ä¸ªlossçš„å®šä¹‰è¯·è§åŸæ–‡ï¼ˆæ­¤å¤„å…ˆè·³è¿‡ï¼‰
<div align="center">
  <img src="../images/å¾®ä¿¡æˆªå›¾_20250318161209.png" width="60%" />
<figcaption>  
</figcaption>
</div>

è€Œè®­ç»ƒé‡‡ç”¨çš„æ•°æ®å¤§è‡´è·ŸMASt3Rå·®ä¸å¤š

å¯¹äºè¾“å…¥çš„å›¾ç‰‡ï¼Œå…ˆç”¨DINO V2(ã€Š[Dinov2: Learning robust visual features without supervision](https://arxiv.org/pdf/2304.07193)ã€‹)æ¥è·å–Kä¸ªtokenï¼Œç„¶åé€šè¿‡alternating-attentionï¼ˆåº”è¯¥ä¹Ÿå°±æ˜¯æ‰§è¡Œæ ‡å‡†çš„transformer Lï¼ˆL=24ï¼‰æ¬¡ï¼‰ï¼Œè€Œå¯¹äºè¾“å‡ºçš„prediction headsï¼š
* camera parametersï¼š4ä¸ªself-attention layers+ä¸€ä¸ªå…¨è¿æ¥å±‚
* dense mapï¼Œpoint mapå’Œtracking featureï¼šéƒ½æ˜¯ç”¨DPT layer(ã€Š[Vision transformers for dense prediction](https://openaccess.thecvf.com/content/ICCV2021/papers/Ranftl_Vision_Transformers_for_Dense_Prediction_ICCV_2021_paper.pdf)ã€‹)
* è‡³äºå®ç°trackingçš„è¿‡ç¨‹ï¼Œåˆ™æ˜¯é‡‡ç”¨CoTracker2ç»“æ„ï¼ˆã€Š[Cotracker: It is better to track together](https://arxiv.org/pdf/2307.07635)ã€‹ï¼‰


## è®ºæ–‡çš„ç»“æœ

è®ºæ–‡çš„å®éªŒå¯ä»¥è¯´æ˜¯éå¸¸solidçš„ï¼Œä¹Ÿå±•ç¤ºéå¸¸å¼ºå¤§çš„æ³›åŒ–èƒ½åŠ›

1. é¦–å…ˆæ˜¯pose estimationï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º.
é‡‡ç”¨çš„è¯„åˆ¤æŒ‡æ ‡æ˜¯AUCï¼ˆç»¼åˆäº†Relative Rotation Accuracy (RRA)å’ŒRelative Translation Accuracy RTAï¼Œè™½ç„¶æ˜¯SLAMä¸­æ¯”è¾ƒå°‘è§çš„ï¼Œä½†ä¼°è®¡æ˜¯ä¸ºäº†è·ŸPoseDiffusionå¯¹æ¯”ï¼‰ã€‚
å¯ä»¥çœ‹åˆ°ï¼Œæ—¶é—´ä¸Šç”¨æ—¶æ˜¯æœ€çŸ­çš„ï¼Œè€Œç²¾åº¦ä¹Ÿæ˜¯æœ€é«˜çš„ã€‚åºåˆ—éƒ½æ˜¯åœ¨Co3Dv2ä¸‹è®­ç»ƒï¼Œæ²¡æœ‰åœ¨Re10Kä¸‹è®­ç»ƒè¿‡çš„ã€‚å¯¹äºåƒDUSt3Rå’ŒMASt3Rè¿™ç§è¿˜æ˜¯æœ‰global BAçš„ä¹Ÿè¿œä¸å¦‚VGGTã€‚

æ­¤å¤–ï¼ŒåŠ ä¸ŠBAåï¼ŒVGGTçš„æ€§èƒ½ä¼šæ›´å¥½ï¼Œè€ŒVGGTæœ¬èº«å°±å¯ä»¥è·å¾—ç²¾åº¦æ¯”è¾ƒæçš„point/depth mapï¼Œè¿™å¯ä»¥ç»™BAæä¾›è¾ƒå¥½çš„åˆå§‹åŒ–ï¼Œä¹Ÿä¸éœ€è¦ä¸‰è§’åŒ–æˆ–è€…iterative refinementç­‰ä¸€ç³»åˆ—çš„æ“ä½œ

<div align="center">
  <img src="../images/å¾®ä¿¡æˆªå›¾_20250318143511.png" width="60%" />
<figcaption>  
</figcaption>
</div>

2. æ·±åº¦ä¼°è®¡çš„å®éªŒå¯¹æ¯”ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚åªæœ‰DUSt3Rå’ŒVGGTä¸éœ€è¦GT poseï¼Œè€ŒMASt3Rè¦ä¼°ç®—æ·±åº¦æ˜¯éœ€è¦åŸºäºcamera poseæ¥åšä¸‰è§’åŒ–çš„ã€‚
è€ŒVGGTä¹Ÿæ˜¯å–å¾—æœ€ä½³çš„performanceçš„

<div align="center">
  <img src="../images/å¾®ä¿¡æˆªå›¾_20250318144649.png" width="60%" />
<figcaption>  
</figcaption>
</div>

3. point mapä¼°ç®—çš„æ•ˆæœã€‚å¦‚ä¸‹å·¦å›¾æ‰€ç¤ºï¼ŒDUSt3Rè¾“å…¥å¤šå¼ imageçš„æ—¶å€™æ˜¯æˆå¯¹çš„å¤„ç†çš„ï¼Œå› æ­¤å½“32å¼ å›¾è¾“å…¥ï¼Œæ—¶é—´çˆ†ç‚¸å¼å¢é•¿åˆ°200sä½†æ˜¯VGGTä»ç„¶æ˜¯0.6sã€‚ç›¸æ¯”èµ·å•å¼ æˆ–è€…ä¸¤å¼ å›¾ç‰‡çš„è¾“å…¥ï¼Œæ—¶é—´å¢é•¿å¹¶æ²¡æœ‰DUSt3Ré‚£ä¹ˆå¤§ã€‚

<div align="center">
  <table style="border: none; background-color: transparent;">
    <tr align="center">
      <td style="width: 50%; border: none; padding: 0.01; background-color: transparent; vertical-align: middle;">
        <img src="../images/å¾®ä¿¡æˆªå›¾_20250318153009.png" width="100%" />
      </td>
      <td style="width: 50%; border: none; padding: 0.01; background-color: transparent; vertical-align: middle;">
        <img src="../images/å¾®ä¿¡æˆªå›¾_20250318153025.png" width="100%" />
      </td>
    </tr>
  </table>
  <figcaption>
  </figcaption>
</div>

æ­¤å¤–ï¼ŒDUSt3Rå’ŒMASt3Råœ¨å¤„ç†å•å¼ å›¾ç‰‡è¾“å…¥çš„æ—¶å€™ï¼Œæ˜¯duplicate å›¾åƒçš„ï¼Œä½†æ˜¯VGGTåˆ™æ˜¯å®åœ¨çš„æ”¯æŒå•å¼ å›¾ç‰‡çš„è¾“å…¥ï¼Œæ•…æ­¤ä¸Šå·¦å›¾å¯ä»¥çœ‹åˆ°å•å¼ å›¾åƒçš„è¾“å…¥æ—¶ï¼Œæ¯”DUSt3Rè¦å¥½äº›~

<div align="center">
  <img src="../images/å¾®ä¿¡æˆªå›¾_20250318154826.png" width="80%" />
<figcaption>  
</figcaption>
</div>

4. ä¸‹é¢åˆ™æ˜¯è·ŸSuperGlueã€LoFTRç­‰image matchingçš„æ–¹æ³•å¯¹æ¯”ï¼ŒVGGTä¹Ÿæ˜¯SOTA

<div align="center">
  <img src="../images/å¾®ä¿¡æˆªå›¾_20250318153458.png" width="60%" />
<figcaption>  
</figcaption>
</div>

5. point trackingä»¥åŠæ–°äº‹ä»¶åˆæˆç­‰ä»»åŠ¡
<div align="center">
  <img src="../images/å¾®ä¿¡æˆªå›¾_20250318153644.png" width="60%" />
  <img src="../images/å¾®ä¿¡æˆªå›¾_20250318153656.png" width="60%" />
<figcaption>  
</figcaption>
</div>

<div align="center">
  <table style="border: none; background-color: transparent;">
    <tr align="center">
      <td style="width: 50%; border: none; padding: 0.01; background-color: transparent; vertical-align: middle;">
        <img src="../images/å¾®ä¿¡æˆªå›¾_20250318153708.png" width="100%" />
      </td>
      <td style="width: 50%; border: none; padding: 0.01; background-color: transparent; vertical-align: middle;">
        <img src="../images/å¾®ä¿¡æˆªå›¾_20250318153719.png" width="100%" />
      </td>
    </tr>
  </table>
  <figcaption>
  </figcaption>
</div>


# å®éªŒæµ‹è¯•

* æœ¬æµ‹è¯•é‡‡ç”¨çš„ä»£ç åŠåç»­çš„æ³¨é‡Šï¼ˆå¦‚æœ‰ï¼‰å‡åœ¨[Github](https://github.com/KwanWaiPang/vggt)

## é…ç½®æµ‹è¯•
```bash
git clone https://github.com/KwanWaiPang/vggt.git
cd vggt

# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
conda create -n VGGT python=3.11
conda activate VGGT
# conda remove --name VGGT --all

pip install -r requirements.txt
```

* å®‰è£…å¯è§†åŒ–å·¥å…·
```bash
pip install -r requirements_demo.txt
```

* ä¸‹è½½æ¨¡å‹[link](https://huggingface.co/facebook/VGGT-1B/resolve/main/model.pt)

* è¿è¡Œdemo
```bash
conda activate VGGT
pip install matplotlib

python demo_gradio.py
```
è¿è¡Œåä¼¼ä¹ä¼šè‡ªåŠ¨ä¸‹è½½å‰é¢ä¸‹è½½å¥½çš„æ¨¡å‹ï¼Œå› æ­¤æ‰‹åŠ¨ä¸‹è½½è¿‡å°±æ³¨é‡Šæ‰å°±å¯ä»¥äº†å§ï¼ˆä½†æµ‹è¯•çš„æ—¶å€™å‘ç°ä¼šæŠ¥é”™ï¼Œé‚£è¿˜æ˜¯ç›´æ¥é‡æ–°ä¸‹è½½ç®—äº†~ï¼‰

<div align="center">
  <img src="https://github.com/KwanWaiPang/vggt/raw/main/Figs/å¾®ä¿¡æˆªå›¾_20250318164931.png" width="80%" />
<figcaption>  
</figcaption>
</div>

æœ€ç»ˆæœ‰æƒé™ç±»çš„é”™è¯¯

<div align="center">
  <img src="https://github.com/KwanWaiPang/vggt/raw/main/Figs/å¾®ä¿¡æˆªå›¾_20250318165510.png" width="80%" />
<figcaption>  
</figcaption>
</div>

å°è¯•é‡‡ç”¨ä¸‹é¢çš„visualization
```bash
python demo_viser.py --image_folder path/to/your/images/folder

conda activate VGGT
python demo_viser.py --image_folder dataset/tandt_train
```
åœ¨vscodeä¸­è¿è¡Œåº”è¯¥å°±å¯ä»¥ç›´æ¥ç‚¹å‡»æ‰“å¼€è¿›å»æµè§ˆå™¨è§‚çœ‹æ•ˆæœäº†~

çœ‹ä¸Šå»å¤§åœºæ™¯çš„æ•ˆæœä¼¼ä¹æ¯”[Fast3R](https://kwanwaipang.github.io/Fast3R/)è¦å¥½ä¸å°‘~

<div align="center">
  <img src="https://github.com/KwanWaiPang/vggt/raw/main/Figs/å¾®ä¿¡æˆªå›¾_20250318170557.png" width="80%" />
   <img src="https://github.com/KwanWaiPang/vggt/raw/main/Figs/å¾®ä¿¡æˆªå›¾_20250318170610.png" width="80%" />
   <img src="https://github.com/KwanWaiPang/vggt/raw/main/Figs/å¾®ä¿¡æˆªå›¾_20250318170633.png" width="80%" />
<figcaption>  
</figcaption>
</div>

* ä¹Ÿå¯ä»¥é‡‡ç”¨åœ¨çº¿çš„damo [Link](https://huggingface.co/spaces/facebook/vggt) æ—©è¯´å˜›ï¼Œæˆ‘å°±æ‡’å¾—é…ç½®äº†ğŸ˜‚è€Œä¸”åœ¨çº¿çš„UIä¹Ÿå¥½ä¸å°‘~

* åœ¨[åŸreadme](./README%20original.md)ä¸­ä¹Ÿä»ä»£ç è§’åº¦ä»‹ç»äº†æ¯ä¸ªæ¨¡å—å¤§è‡´æ€ä¹ˆä½¿ç”¨

## æµ‹è¯•æ•ˆæœ

* é¦–å…ˆå…ˆçœ‹çœ‹ä½œè€…ç»™çš„æ•°æ®çš„æ•ˆæœ

<!-- åœ¨ Markdown ä¸­æ’å…¥ä»¥ä¸‹ä»£ç  -->
<script type="module" src="https://cdn.skypack.dev/@google/model-viewer"></script>

<model-viewer
  src="{{ '/images/testing1.glb' | relative_url }}" 
  alt="3D Model"
  ar
  auto-rotate
  camera-controls
  style="width: 100%; height: 400px;"
></model-viewer>