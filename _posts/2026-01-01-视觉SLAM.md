---
layout: post
title: "视觉SLAM"
date:   2026-01-01
tags: [SLAM]
comments: true
author: kwanwaipang
toc: true
excerpt: "" # 【指定摘要内容】
---


<!-- * 目录
{:toc} -->


* [原博客](https://kwanwaipang.github.io/File/Blogs/Poster/%E8%A7%86%E8%A7%89SLAM.html)

<div id="target-content-placeholder">正在加载...</div>

<script>
(function() {
  if (window.__LIDAR_BLOG_LOADED__) return;
  window.__LIDAR_BLOG_LOADED__ = true;

  const baseUrl = '/File/Blogs/Poster/'; 
  const filePath = baseUrl + '视觉SLAM.html';

  fetch(filePath)
    .then(res => res.text())
    .then(html => {
      const parser = new DOMParser();
      const doc = parser.parseFromString(html, 'text/html');

      // 移除干扰元素
      const toRemove = ['header', '.navbar', '.post-header', '#toc', '#newToc', '#toggleTocButton', '#scrollToTocButton', 'footer'];
      toRemove.forEach(s => doc.querySelectorAll(s).forEach(el => el.remove()));

      // --- 关键步骤：提取标题生成目录 ---
      const headings = doc.querySelectorAll('h1, h2, h3');
      const tocContainer = document.getElementById('custom-toc-container');
      if (headings.length > 0 && tocContainer) {
        const tocList = document.createElement('ul');
        tocList.className = 'custom-toc';
        headings.forEach((h, index) => {
          const id = h.id || `heading-${index}`;
          h.id = id; // 确保标题有 ID 供跳转
          const li = document.createElement('li');
          li.style.marginLeft = (parseInt(h.tagName[1]) - 1) * 15 + 'px';
          li.innerHTML = `<a href="#${id}">${h.innerText}</a>`;
          
          // 处理 Shadow DOM 跳转
          li.querySelector('a').onclick = (e) => {
            e.preventDefault();
            const targetEl = shadow.getElementById(id);
            if (targetEl) targetEl.scrollIntoView({ behavior: 'smooth' });
          };
          tocList.appendChild(li);
        });
        tocContainer.appendChild(tocList);
      }
      // -------------------------------

      const rawBody = doc.body.innerHTML;
      const processedHtml = rawBody.replace(/(src|href)="(?!(http|https|\/|#))/g, `$1="${baseUrl}`);

      let styleContent = '';
      doc.querySelectorAll('style, link[rel="stylesheet"]').forEach(s => { /* ...保持原样... */ });

      const target = document.getElementById('target-content-placeholder');
      const shadow = target.attachShadow({ mode: 'open' }); // 定义在外部供 TOC 使用
      shadow.innerHTML = styleContent + processedHtml;
      target.childNodes[0].textContent = ""; 
    });
})();
</script>

<style>
.custom-toc { 
  background: #f9f9f9; 
  padding: 15px; 
  border-radius: 5px; 
  list-style: none;
  border: 1px solid #eee;
}
.custom-toc a { text-decoration: none; color: #007bff; }
</style>

<style>
/* 隐藏多余的占位符（如果主题渲染了两次，第二次会被 JS 忽略并由 CSS 隐藏） */
#target-content-placeholder:not(:first-of-type) {
  display: none !important;
}
#target-content-placeholder {
  width: 100%;
  position: relative;
}
</style>


